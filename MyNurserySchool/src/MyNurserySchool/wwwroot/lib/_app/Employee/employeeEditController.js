!function(){"use strict";function e(e,o,n,t,a){t("baseController",{$scope:e});var l=this;l.employeeId=n.id,l.employee={},l.isNew=0==l.employeeId,e.attendance=[{id:0,name:"Žiadateľ"},{id:1,name:"Pracujúci"},{id:2,name:"Odstúpený"}],e.employmentTypes=[{value:"Dohoda"},{value:"Plný úväzok"},{value:"Študentská dohoda"},{value:"Skrátený úväzok"},{value:"Živnosť"}],l.isNew||(l.isBusy=!0,o.get("/Api/Employee/"+l.employeeId).then(function(e){angular.copy(e.data,l.employee)},function(){toastr.error("Nepodarilo sa načítať informácie o zamestnancovi")})["finally"](function(){l.isBusy=!1})),l.saveEmployee=function(n){n&&(l.isBusy=!0,l.isNew?o.post("/Api/Employee/"+e.outerId,l.employee).then(function(o){toastr.success("Zamestnanec "+l.employee.fullName+" bol úspešne vytvorený"),e.back()},function(){toastr.error("Zamestnanca sa nepodarilo vytvoriť")})["finally"](function(){l.isBusy=!1}):o.put("/Api/Employee/"+e.outerId,l.employee).then(function(o){toastr.success("Zmeny v zamestnancovi "+l.employee.fullName+" boli úspešne uložené"),e.back()},function(){toastr.error("Zamestnanca sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1}))},l.deleteEmployeeModal=function(){e.deleteModalTarget="zamestnanca "+l.employee.fullName;var o=a.open({templateUrl:"/app/Common/deleteModal.html",controller:"deleteModalController",scope:e});o.result.then(function(){l.deleteEmployee()})},l.deleteEmployee=function(){l.isBusy=!0,o["delete"]("/Api/Employee/"+l.employee.id).then(function(){toastr.success("Zamestnanec bol vymazaný"),e.back()},function(e){toastr.error("Zamestnanca sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}e.$inject=["$scope","$http","$routeParams","$controller","$uibModal"],angular.module("nursery-app").controller("employeeEditController",e)}();