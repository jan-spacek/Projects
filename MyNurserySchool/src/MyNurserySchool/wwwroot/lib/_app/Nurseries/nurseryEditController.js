!function(){"use strict";function e(e,r,n,o,t){var s=this;s.id=e.id,s.nursery={},s.isNew=0==s.id,s.isNew||(s.isBusy=!0,r.get("/Api/Nursery/"+s.id).then(function(e){angular.copy(e.data,s.nursery)},function(){toastr.error("Nepodarilo sa načítať informácie o škôlke")})["finally"](function(){s.isBusy=!1})),s.saveNursery=function(){s.isBusy=!0,s.isNew?r.post("/Api/Nursery",s.nursery).then(function(e){toastr.success("Bola vytvorená nová škôlka "+s.nursery.name),n.path("#/")},function(){toastr.error("Škôlku sa nepodarilo uložiť")})["finally"](function(){s.isBusy=!1}):r.put("/Api/Nursery/",s.nursery).then(function(e){toastr.success("Zmeny v škôlke "+s.nursery.name+" boli úspešne uložené"),n.path("#/")},function(){toastr.error("Škôlku sa nepodarilo uložiť")})["finally"](function(){s.isBusy=!1})},s.deleteNurseryModal=function(){t.deleteModalTarget="škôlku "+s.nursery.name;var e=o.open({templateUrl:"/app/Common/deleteModal.html",controller:"deleteModalController",scope:t});e.result.then(function(){s.deleteNursery()})},s.deleteNursery=function(){s.isBusy=!0;var e=s.nursery.name;r["delete"]("/Api/Nursery/"+s.nursery.id).then(function(){toastr.success("Škôlka "+e+" bola vymazaná"),n.path("#/")},function(r){toastr.error("Škôlku "+e+" sa nepodarilo vymazať")})["finally"](function(){s.isBusy=!1})}}e.$inject=["$routeParams","$http","$location","$uibModal","$scope"],angular.module("nurseries-app").controller("nurseryEditController",e)}();