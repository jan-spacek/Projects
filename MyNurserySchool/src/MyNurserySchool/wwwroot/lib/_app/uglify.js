!function(e){"use strict";e.module("common",[])}(angular),function(e){"use strict";e.module("app.nursery",["common","ngRoute","ngAnimate","mgcrea.ngStrap","ui.bootstrap"]).run(["$http","$location","$rootScope",function(t,n,o){function r(){t.get("/Api/Nurseries").then(function(t){e.copy(t.data,s),o.isAdmin||1!==s.length?n.path("/"):(o.nurseryId=s[0].id,o.classes=s[0].classes)})}var s=[];r()}]).config(["$routeProvider",function(e){e.when("/",{controller:"NurseriesListController",controllerAs:"vm",templateUrl:"/app/Nurseries/nurseries-list.view.html"}),e.when("/edit/:id",{controller:"NurseryAdminEditController",controllerAs:"vm",templateUrl:"/app/Nurseries/nursery-edit.view.html"}),e.when("/users",{controller:"UsersListController",controllerAs:"vm",templateUrl:"/app/User/users-list.view.html"}),e.when("/:nursId",{controller:"NurseryDetailController",controllerAs:"vm",templateUrl:"/app/Nursery/nursery-detail.view.html"}),e.when("/:nursId/edit",{controller:"NurseryEditController",controllerAs:"vm",templateUrl:"/app/Nursery/nursery-edit.view.html"}),e.when("/:nursId/class/:id/edit",{controller:"ClassEditController",controllerAs:"vm",templateUrl:"/app/Class/class-edit.view.html"}),e.when("/:nursId/class/:id",{controller:"ClassDetailController",controllerAs:"vm",templateUrl:"/app/Class/class-detail.view.html"}),e.when("/:nursId/employee/:id/edit",{controller:"EmployeeEditController",controllerAs:"vm",templateUrl:"/app/Employee/employee-edit.view.html"}),e.when("/:nursId/employee/:id",{controller:"EmployeeDetailController",controllerAs:"vm",templateUrl:"/app/Employee/employee-detail.view.html"}),e.when("/:nursId/child/:id/edit",{controller:"ChildEditController",controllerAs:"vm",templateUrl:"/app/Child/child-edit.view.html"}),e.when("/:nursId/child/:id",{controller:"ChildDetailController",controllerAs:"vm",templateUrl:"/app/Child/child-detail.view.html"}),e.when("/:nursId/employees",{controller:"EmployeesListController",controllerAs:"vm",templateUrl:"/app/Employee/employees-list.view.html"}),e.when("/:nursId/children",{controller:"ChildrenListController",controllerAs:"vm",templateUrl:"/app/Child/children-list-all.view.html"}),e.when("/:nursId/children/waiting",{controller:"ChildrenListController",controllerAs:"vm",templateUrl:"/app/Child/children-list-waiting.view.html"}),e.when("/:nursId/children/archive",{controller:"ChildrenListController",controllerAs:"vm",templateUrl:"/app/Child/children-list-archived.view.html"}),e.otherwise({redirectTo:"/"})}])}(angular),function(e){"use strict";function t(e){return this}e.module("app.nursery").factory("dataService",["$http",t])}(angular),function(e){"use strict";function t(t,n,o,r,s,l){function i(){n.get("/Api/Class/"+a.child.classId).then(function(e){a.classTitle=e.data.name},function(){toastr.error("Nepodarilo sa načítať informácie o škôlke")})["finally"](function(){a.isBusy=!1})}l("BaseController",{$scope:t});var a=this;a.childId=r.id,a.nurseryId=parseInt(r.nursId),a.child={},a.newNote={},a.attendanceStates=["Žiadateľ","Docházdajúci","Odstúpený"],a.isBusy=!0,n.get("/Api/Child/"+a.childId).then(function(t){e.copy(t.data,a.child),a.classId=a.child.classId,a.child.description=a.child.description?s.trustAsHtml(a.child.description.replace(/(\r\n|\n|\r)/gm,"<br />")):null,a.child.contacts=a.child.contacts?s.trustAsHtml(a.child.contacts.replace(/(\r\n|\n|\r)/gm,"<br />")):null,i();for(var n=0;n<a.child.notes.length;n++)null!=a.child.notes[n].text&&(a.child.notes[n].text=s.trustAsHtml(a.child.notes[n].text.replace(/(\r\n|\n|\r)/gm,"<br />")))},function(){toastr.error("Nepodarilo sa načítať informácie o dieťati")})["finally"](function(){a.isBusy=!1}),a.deleteChild=function(){a.isBusy=!0,n["delete"]("/Api/Child/"+a.child.id).then(function(){toastr.success("Dieťa bolo vymazané"),o.path("#/class/"+a.classId)},function(e){toastr.error("Dieťa sa nepodarilo vymazať")})["finally"](function(){a.isBusy=!1})},a.saveNote=function(){a.isBusy=!0,a.newNote.childId=a.childId,n.post("/Api/Note/",a.newNote).then(function(e){a.child.notes.push(e.data),a.child.notes[a.child.notes.length-1].text=s.trustAsHtml(a.child.notes[a.child.notes.length-1].text.replace(/(\r\n|\n|\r)/gm,"<br />")),toastr.success("Poznámka bola zapísaná"),a.newNote={}},function(e){toastr.error("Poznámku sa nepodarilo zapísať")})["finally"](function(){a.isBusy=!1})},a.deleteNote=function(e){a.isBusy=!0,n["delete"]("/Api/Note/"+e).then(function(){for(var t=0;t<a.child.notes.length;t++){var n=a.child.notes[t];n.id==e&&a.child.notes.splice(t,1)}toastr.success("Poznámka bola vymazaná")},function(e){toastr.error("Poznámku sa nepodarilo vymazať")})["finally"](function(){a.isBusy=!1})}}t.$inject=["$scope","$http","$location","$routeParams","$sce","$controller"],e.module("app.nursery").controller("ChildDetailController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){r("BaseController",{$scope:t});var l=this;l.childId=o.id,l.nurseryId=parseInt(o.nursId),l.child={},l.classId=0,l.isNew=0==l.childId,t.attendance=[{id:0,name:"Žiadateľ"},{id:1,name:"Dochádzajúci"},{id:2,name:"Odstúpený"}],l.classes=[],n.get("/Api/Nursery/"+l.nurseryId+"/Classes/").then(function(n){e.copy(n.data,l.classes),t.classes=l.classes},function(){toastr.error("Nepodarilo sa načítať informácie o triedach")})["finally"](function(){l.isBusy=!1}),l.isNew||(l.isBusy=!0,n.get("/Api/Child/"+l.childId).then(function(t){e.copy(t.data,l.child),l.classId=l.child.classId},function(){toastr.error("Nepodarilo sa načítať informácie o dieťati")})["finally"](function(){l.isBusy=!1})),l.saveChild=function(e){e&&(l.isBusy=!0,l.child.nurseryId=l.nurseryId,l.isNew?n.post("/Api/Child/",l.child).then(function(e){toastr.success("Dieťa "+l.child.firstName+" "+l.child.lastName+" bolo úspešne vytvorené"),t.back()},function(){toastr.error("Dieťa sa nepodarilo vytvoriť")})["finally"](function(){l.isBusy=!1}):(null==l.child.classId&&(l.child.classId=l.classId),n.put("/Api/Child/",l.child).then(function(e){toastr.success("Zmeny v dieťati "+l.child.firstName+" "+l.child.lastName+" boli úspešne uložené"),t.back()},function(){toastr.error("Dieťa sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1})))},l.deleteChildModal=function(){t.deleteModalTarget="dieťa "+l.child.firstName+" "+l.child.lastName;var e=s.open({templateUrl:"/app/common/templates/delete-modal.template.html",controller:"DeleteModalController",scope:t});e.result.then(function(){l.deleteChild()})},l.deleteChild=function(){l.isBusy=!0,n["delete"]("/Api/Child/"+l.child.id).then(function(){toastr.success("Dieťa bolo vymazané"),t.back()},function(e){toastr.error("Dieťa sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}t.$inject=["$scope","$http","$routeParams","$controller","$uibModal"],e.module("app.nursery").controller("ChildEditController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){function l(){i(),a()}function i(){n.get("/Api/Nursery/"+c.nurseryId).then(function(e){if(e.data.classes)for(var t=0;t<e.data.classes.length;t++)c.classes[e.data.classes[t].id]=e.data.classes[t].name},function(e){toastr.error("Nepodarilo sa načítať zoznam škôlok:<br/>"+e.data.message)})}function a(){n.get("/Api/Nursery/"+c.nurseryId+"/children").then(function(t){if(e.copy(t.data,c.children),c.children.length>0)for(var n=0;n<c.children.length;n++)c.children[n].fullName=c.children[n].firstName+" "+c.children[n].lastName,c.children[n].className=c.classes[c.children[n].classId],c.children[n].contacts&&(c.children[n].contacts=o.trustAsHtml(c.children[n].contacts.replace(/(\r\n|\n|\r)/gm,"<br />"))),c.children[n].description&&(c.children[n].description=o.trustAsHtml(c.children[n].description.replace(/(\r\n|\n|\r)/gm,"<br />"))),0==c.children[n].attendance?c.waitingChildren.push(c.children[n]):1==c.children[n].attendance?c.attendantChildren.push(c.children[n]):2==c.children[n].attendance&&c.archivedChildren.push(c.children[n])},function(e){toastr.error("Nepodarilo sa načítať zoznam detí:<br/>"+e.data.message)})["finally"](function(){c.isBusy=!1})}r("BaseController",{$scope:t});var c=this;c.nurseryId=parseInt(s.nursId),c.children=[],c.attendantChildren=[],c.waitingChildren=[],c.archivedChildren=[],c.classes=[],c.isBusy=!0,t.sortType="birthDate",l()}t.$inject=["$scope","$http","$sce","$controller","$routeParams"],e.module("app.nursery").controller("ChildrenListController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s,l){l("BaseController",{$scope:t});var i=this;i.classId=o.id,i.nurseryId=parseInt(o.nursId),i["class"]={},i.children=[],i.isBusy=!0,n.get("/Api/Class/"+i.classId).then(function(t){e.copy(t.data,i["class"]);for(var n=0;n<i["class"].children.length;n++)i["class"].children[n].fullName=i["class"].children[n].firstName+" "+i["class"].children[n].lastName,i["class"].children[n].contacts&&(i["class"].children[n].contacts=r.trustAsHtml(i["class"].children[n].contacts.replace(/(\r\n|\n|\r)/gm,"<br />"))),i["class"].children[n].description&&(i["class"].children[n].description=r.trustAsHtml(i["class"].children[n].description.replace(/(\r\n|\n|\r)/gm,"<br />"))),1==i["class"].children[n].attendance&&i.children.push(i["class"].children[n])},function(e){toastr.error("Nepodarilo sa načítať informácie o triede")})["finally"](function(){i.isBusy=!1})}t.$inject=["$scope","$http","$routeParams","$sce","$window","$controller"],e.module("app.nursery").controller("ClassDetailController",t)}(angular),function(){"use strict";function e(e,t,n,o,r,s){r("BaseController",{$scope:e});var l=this;l.classId=o.id,l.nurseryId=parseInt(o.nursId),l.nursery={},l["class"]={},l.isNew=0==l.classId,l.isBusy=!0,t.get("/Api/Nursery/"+l.nurseryId).then(function(e){if(angular.copy(e.data,l.nursery),!l.isNew)for(var t=0,n=l.nursery.classes.length;n>t;t++)l.nursery.classes[t].id==l.classId&&angular.copy(l.nursery.classes[t],l["class"])},function(){toastr.error("Nepodarilo sa načítať informácie o triede")})["finally"](function(){l.isBusy=!1}),l.saveClass=function(e){e&&(l.isBusy=!0,l.isNew?t.post("/Api/Class/"+l.nursery.id,l["class"]).then(function(e){toastr.success("Trieda "+l["class"].name+" bola úspešne vytvorená"),n.path("#/")},function(){toastr.error("Triedu sa nepodarilo vytvoriť")})["finally"](function(){l.isBusy=!1}):t.put("/Api/Class/"+l.nursery.id,l["class"]).then(function(e){toastr.success("Zmeny v triede "+l["class"].name+" boli úspešne uložené"),n.path("#/")},function(){toastr.error("Triedu sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1}))},l.deleteClassModal=function(){e.deleteModalTarget="triedu "+l["class"].name;var t=s.open({templateUrl:"/app/common/templates/delete-modal.template.html",controller:"DeleteModalController",scope:e});t.result.then(function(){l.deleteClass()})},l.deleteClass=function(){l.isBusy=!0;var n=l["class"].name;t["delete"]("/Api/Class/"+l["class"].id).then(function(){toastr.success("Trieda "+n+" bola vymazaná"),e.back()},function(e){toastr.error("Triedu sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}e.$inject=["$scope","$http","$location","$routeParams","$controller","$uibModal"],angular.module("app.nursery").controller("ClassEditController",e)}(),function(e){"use strict";function t(t,n,o,r,s,l){l("BaseController",{$scope:t});var i=this;i.employeeId=r.id,i.nurseryId=parseInt(r.nursId),i.employee={},i.newNote={},i.attendanceStates=["Žiadateľ","Pracujúci","Odstúpený"],i.isBusy=!0,n.get("/Api/Employee/"+i.employeeId).then(function(t){e.copy(t.data,i.employee),i.employee.description=i.employee.description?s.trustAsHtml(i.employee.description.replace(/(\r\n|\n|\r)/gm,"<br />")):null;for(var n=0;n<i.employee.notes.length;n++)null!=i.employee.notes[n].text&&(i.employee.notes[n].text=s.trustAsHtml(i.employee.notes[n].text.replace(/(\r\n|\n|\r)/gm,"<br />")))},function(){toastr.error("Nepodarilo sa načítať informácie o zamestnancovi:<br/>")})["finally"](function(){i.isBusy=!1}),i.saveNote=function(){i.isBusy=!0,i.newNote.employeeId=i.employeeId,n.post("/Api/Note/",i.newNote).then(function(e){i.employee.notes.push(e.data),i.employee.notes[i.employee.notes.length-1].text=s.trustAsHtml(i.employee.notes[i.employee.notes.length-1].text.replace(/(\r\n|\n|\r)/gm,"<br />")),toastr.success("Poznámka bola zapísaná"),i.newNote={}},function(e){toastr.error("Poznámku sa nepodarilo zapísať")})["finally"](function(){i.isBusy=!1})},i.deleteNote=function(e){i.isBusy=!0,n["delete"]("/Api/Note/"+e).then(function(){for(var t=0;t<i.employee.notes.length;t++){var n=i.employee.notes[t];n.id==e&&i.employee.notes.splice(t,1)}toastr.success("Poznámka bola vymazaná")},function(e){toastr.error("Poznámku sa nepodarilo vymazať")})["finally"](function(){i.isBusy=!1})}}t.$inject=["$scope","$http","$location","$routeParams","$sce","$controller"],e.module("app.nursery").controller("EmployeeDetailController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){r("BaseController",{$scope:t});var l=this;l.employeeId=o.id,l.nurseryId=parseInt(o.nursId),l.employee={},l.isNew=0==l.employeeId,t.attendance=[{id:0,name:"Žiadateľ"},{id:1,name:"Pracujúci"},{id:2,name:"Odstúpený"}],t.employmentTypes=[{value:"Dohoda"},{value:"Plný úväzok"},{value:"Študentská dohoda"},{value:"Skrátený úväzok"},{value:"Živnosť"}],l.isNew||(l.isBusy=!0,n.get("/Api/Employee/"+l.employeeId).then(function(t){e.copy(t.data,l.employee)},function(){toastr.error("Nepodarilo sa načítať informácie o zamestnancovi")})["finally"](function(){l.isBusy=!1})),l.saveEmployee=function(e){e&&(l.isBusy=!0,l.isNew?n.post("/Api/Employee/"+l.nurseryId,l.employee).then(function(e){toastr.success("Zamestnanec "+l.employee.fullName+" bol úspešne vytvorený"),t.back()},function(){toastr.error("Zamestnanca sa nepodarilo vytvoriť")})["finally"](function(){l.isBusy=!1}):n.put("/Api/Employee/"+l.nurseryId,l.employee).then(function(e){toastr.success("Zmeny v zamestnancovi "+l.employee.fullName+" boli úspešne uložené"),t.back()},function(){toastr.error("Zamestnanca sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1}))},l.deleteEmployeeModal=function(){t.deleteModalTarget="zamestnanca "+l.employee.fullName;var e=s.open({templateUrl:"/app/common/templates/delete-modal.template.html",controller:"DeleteModalController",scope:t});e.result.then(function(){l.deleteEmployee()})},l.deleteEmployee=function(){l.isBusy=!0,n["delete"]("/Api/Employee/"+l.employee.id).then(function(){toastr.success("Zamestnanec bol vymazaný"),t.back()},function(e){toastr.error("Zamestnanca sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}t.$inject=["$scope","$http","$routeParams","$controller","$uibModal"],e.module("app.nursery").controller("EmployeeEditController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){r("BaseController",{$scope:t});var l=this;l.nurseryId=parseInt(s.nursId),l.employees=[],l.isBusy=!0,t.attendance=[{id:0,name:"Žiadateľ"},{id:1,name:"Pracujúci"},{id:2,name:"Odstúpený"}],n.get("/Api/Nursery/"+l.nurseryId+"/employees").then(function(t){e.copy(t.data,l.employees)},function(e){toastr.error("Nepodarilo sa načítať zoznam zamestnancov")})["finally"](function(){l.isBusy=!1})}t.$inject=["$scope","$http","$window","$controller","$routeParams"],e.module("app.nursery").controller("EmployeesListController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s,l){function i(e){o.get("/Api/Class/"+a.nursery.classes[e].id).then(function(t){for(var n=0;n<t.data.children.length;n++)1==t.data.children[n].attendance&&a.nursery.classes[e].children.push(t.data.children[n])},function(){toastr.error("Nepodarilo sa načítať informácie o triede")})}l("BaseController",{$scope:t});var a=this;a.nurseryId=parseInt(n.nursId),a.nursery={},a.isBusy=!0,t.sortType="title",t.sortReverse=!0,o.get("/Api/Nursery/"+a.nurseryId).then(function(t){if(e.copy(t.data,a.nursery),a.nursery.classes.length>0){a.isBusy=!0;for(var n=0;n<a.nursery.classes.length;n++)i(n)}},function(){toastr.error("Nepodarilo sa načítať informácie o škôlke")})["finally"](function(){a.isBusy=!1})}t.$inject=["$scope","$routeParams","$http","$location","$window","$controller"],e.module("app.nursery").controller("NurseryDetailController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){r("BaseController",{$scope:t});var l=this;l.nurseryId=parseInt(s.nursId),l.nursery={},l.isBusy=!0,n.get("/Api/Nursery/"+l.nurseryId).then(function(t){e.copy(t.data,l.nursery)},function(){toastr.error("Nepodarilo sa načítať informácie o škôlke")})["finally"](function(){l.isBusy=!1}),l.saveNursery=function(e){e&&(l.isBusy=!0,n.put("/Api/Nursery/",l.nursery).then(function(e){toastr.success("Zmeny v škôlke "+l.nursery.name+" boli úspešne uložené"),o.path("#/")},function(){toastr.error("Škôlku sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1}))}}t.$inject=["$scope","$http","$location","$controller","$routeParams"],e.module("app.nursery").controller("NurseryEditController",t)}(angular),function(e){"use strict";function t(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}t.$inject=["$scope","$uibModalInstance"],e.module("app.nursery").controller("UserEditModalController",t)}(angular),function(e){"use strict";function t(t,n,o,r){var s=this;s.users=[],s.roles=[],s.nurseries=[],s.isBusy=!0,t.get("/Api/Users").then(function(t){e.copy(t.data,s.users),s.getRoles()},function(e){toastr.error("Nepodarilo sa načítať dáta: "+e)}),s.getRoles=function(){t.get("/Api/Roles").then(function(t){e.copy(t.data,s.roles),s.getNurseries()},function(e){toastr.error("Nepodarilo sa načítať dáta: "+e)})},s.getNurseries=function(){t.get("/Api/Nurseries").then(function(t){e.copy(t.data,s.nurseries),s.joinData()},function(e){toastr.error("Nepodarilo sa načítať dáta: "+e)})},s.joinData=function(){_.each(s.users,function(e){e.nurseries=[],_.each(e.claims,function(t){if("Nursery"===t.claimType){var n=_.find(s.nurseries,function(e){return e.id===parseInt(t.claimValue)});e.nurseries.push({id:parseInt(t.claimValue),name:n.name})}}),e.userRoles=[],_.each(e.roles,function(t){var n=_.find(s.roles,function(e){return e.id==t.roleId});e.userRoles.push({id:n.id,name:n.name})})}),s.isBusy=!1},s.editModal=function(e){n.actualUser=e,n.roles=s.roles,n.nurseries=[],_.each(s.nurseries,function(e){n.nurseries.push({id:e.id,name:e.name})});var t=r.open({templateUrl:"/App/User/user-edit-modal.template.html",controller:"UserEditModalController",scope:n});t.result.then(function(){})},s.generateModal=function(e){},s.deleteModal=function(e){n.deleteModalTarget="používateľa "+e.userName;var t=r.open({templateUrl:"/app/common/templates/delete-modal.template.html",controller:"DeleteModalController",scope:n});t.result.then(function(){})},n.redirect=function(e){o.location.href=e}}t.$inject=["$http","$scope","$window","$uibModal"],e.module("app.nursery").controller("UsersListController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){function l(){t.get("/Api/Nurseries").then(function(t){e.copy(t.data,i.nurseries),1!==i.nurseries.length||s.isAdmin?s.nurseryId=void 0:i.nurseryDblClick(i.nurseries[0])},function(e){toastr.error("Nepodarilo sa načítať dáta: "+e)})["finally"](function(){i.isBusy=!1})}var i=this;i.nurseries=[],i.isBusy=!0,l(),i.nurseryDblClick=function(e){s.nurseryId=e.id,s.classes=e.classes,r.path(e.id)}}t.$inject=["$http","$scope","$window","$location","$rootScope"],e.module("app.nursery").controller("NurseriesListController",t)}(angular),function(e){"use strict";function t(t,n,o,r,s){var l=this;l.nurseryId=parseInt(t.id),l.nursery={},l.isNew=0==l.id,l.isNew||(l.isBusy=!0,n.get("/Api/Nursery/"+l.nurseryId).then(function(t){e.copy(t.data,l.nursery)},function(){toastr.error("Nepodarilo sa načítať informácie o škôlke")})["finally"](function(){l.isBusy=!1})),l.saveNursery=function(){l.isBusy=!0,l.isNew?n.post("/Api/Nursery",l.nursery).then(function(e){toastr.success("Bola vytvorená nová škôlka "+l.nursery.name),o.path("#/")},function(){toastr.error("Škôlku sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1}):n.put("/Api/Nursery/",l.nursery).then(function(e){toastr.success("Zmeny v škôlke "+l.nursery.name+" boli úspešne uložené"),o.path("#/")},function(){toastr.error("Škôlku sa nepodarilo uložiť")})["finally"](function(){l.isBusy=!1})},l.deleteNurseryModal=function(){s.deleteModalTarget="škôlku "+l.nursery.name;var e=r.open({templateUrl:"/app/common/templates/delete-modal.template.html",controller:"DeleteModalController",scope:s});e.result.then(function(){l.deleteNursery()})},l.deleteNursery=function(){l.isBusy=!0;var e=l.nursery.name;n["delete"]("/Api/Nursery/"+l.nursery.id).then(function(){toastr.success("Škôlka "+e+" bola vymazaná"),o.path("#/")},function(t){toastr.error("Škôlku "+e+" sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}t.$inject=["$routeParams","$http","$location","$uibModal","$scope"],e.module("app.nursery").controller("NurseryAdminEditController",t)}(angular),function(e){"use strict";function t(e,t){e.redirect=function(e){t.location.href=e},e.back=function(){t.history.back()},e.back2=function(){t.history.go(-2)},e.exportAction=function(t){switch(t){case"excel":e.$broadcast("export-excel",{});break;case"doc":e.$broadcast("export-doc",{});break;default:console.log("no event caught")}}}t.$inject=["$scope","$window"],e.module("common").controller("BaseController",t)}(angular),function(e){"use strict";function t(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}t.$inject=["$scope","$uibModalInstance"],e.module("common").controller("DeleteModalController",t)}(angular),function(e){"use strict";function t(e){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/app/common/templates/back-button.template.html"}}t.$inject=["$window"],e.module("common").directive("backButton",t)}(angular),function(e){"use strict";function t(){return{restrict:"E",transclude:!0,replace:!0,template:'<div id="backtop"><a title="Späť na začiatok"><i class="fa fa-2x fa-chevron-up"></a></div>',link:function(e,t){e.speed=600,e.currentYPosition=function(){return this.pageYOffset?this.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},e.smoothScroll=function(){var t=e.currentYPosition(),n=0,o=n>t?n-t:t-n;if(100>o)return void scrollTo(0,n);var r=Math.round(e.speed/100),s=Math.round(o/25),l=n>t?t+s:t-s,i=0;if(n>t)for(var a=t;n>a;a+=s)setTimeout("window.scrollTo(0, "+l+")",i*r),l+=s,l>n&&(l=n),i++;else for(var c=t;c>n;c-=s)setTimeout("window.scrollTo(0, "+l+")",i*r),l-=s,n>l&&(l=n),i++},e.button=t.find("a"),e.button.on("click",function(){e.smoothScroll(),t.removeClass("show")}),window.addEventListener("scroll",function(){window.pageYOffset>0?t.addClass("show"):t.removeClass("show")})}}}e.module("common").directive("backToTop",t)}(angular),function(e){"use strict";function t(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){var s=function(e){void 0===e&&(e="");var t=e.replace(/[^-'\s]+/g,function(e){return e.charAt(0).toUpperCase()+e.substring(1)});return t!==e&&(r.$setViewValue(t),r.$render()),t};r.$parsers.push(s),s(e(o.ngModel)(t))}}}t.$inject=["$parse"],e.module("common").directive("capitalizeAllFirst",t)}(angular),function(e){"use strict";function t(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){var s=function(e){void 0===e&&(e="");var t=e.charAt(0).toUpperCase()+e.substring(1);return t!==e&&(r.$setViewValue(t),r.$render()),t};r.$parsers.push(s),s(e(o.ngModel)(t))}}}t.$inject=["$parse"],e.module("common").directive("capitalizeFirst",t)}(angular),function(e){"use strict";function t(){return{restrict:"E",scope:{model:"="},templateUrl:"/app/common/templates/created-modified.template.html"}}e.module("common").directive("createdModified",t)}(angular),function(e){"use strict";function t(t,n,o,r){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",groupBy:"@"},template:function(e,t){var n=!!t.checkboxes,o=!!t.groupBy,r='<div class="multiselect-parent btn-group dropdown-multiselect">';r+='<button type="button" class="dropdown-toggle" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{getButtonText()}}</button>',r+="<ul class=\"dropdown-menu dropdown-menu-form\" ng-style=\"{display: open ? 'block' : 'none', height : settings.scrollable ? settings.scrollableHeight : 'auto' }\" style=\"overflow: none\" >",r+='<li ng-hide="!settings.showCheckAll || settings.selectionLimit > 0"><a data-ng-click="selectAll()"><span class="glyphicon glyphicon-ok"></span>  {{texts.checkAll}}</a>',r+='<li ng-show="settings.showUncheckAll"><a data-ng-click="deselectAll();"><span class="glyphicon glyphicon-remove"></span>   {{texts.uncheckAll}}</a></li>',r+='<li ng-hide="(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll" class="divider"></li>',r+='<li ng-show="settings.enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',r+='<li ng-show="settings.enableSearch" class="divider"></li>',o?(r+='<li ng-repeat-start="option in orderedItems | filter: searchFilter" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role="presentation" class="dropdown-header">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}</li>',r+='<li ng-repeat-end role="presentation">'):r+='<li role="presentation" ng-repeat="option in options | filter: searchFilter">',r+='<a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">',r+=n?'<div class="checkbox"><label><input class="checkboxInput" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div></a>':"<span data-ng-class=\"{'glyphicon glyphicon-ok': isChecked(getPropertyForObject(option,settings.idProp))}\"></span> {{getPropertyForObject(option, settings.displayProp)}}</a>",r+="</li>",r+='<li class="divider" ng-show="settings.selectionLimit > 1"></li>',r+='<li role="presentation" ng-show="settings.selectionLimit > 1"><a role="menuitem">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li>',r+="</ul>",r+="</div>",e.html(r)},link:function(o,r,s){function l(e){var t={};return""===o.settings.externalIdProp?t[o.settings.idProp]=e:t[o.settings.externalIdProp]=e,t}function i(e){for(var t in e)delete e[t]}var a=r.children()[0];o.toggleDropdown=function(){o.open=!o.open},o.checkboxClick=function(e,t){o.setSelectedItem(t),e.stopImmediatePropagation()},o.externalEvents={onItemSelect:e.noop,onItemDeselect:e.noop,onSelectAll:e.noop,onDeselectAll:e.noop,onInitDone:e.noop,onMaxSelectionReached:e.noop},o.settings={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"name",idProp:"id",externalIdProp:"id",enableSearch:!1,selectionLimit:0,showCheckAll:!1,showUncheckAll:!1,closeOnSelect:!1,buttonClasses:"form-control",closeOnDeselect:!1,groupBy:s.groupBy||void 0,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:e.noop},o.texts={checkAll:"Označ všetko",uncheckAll:"Odznač všetko",selectionCount:"checked",selectionOf:"/",searchPlaceholder:"Hľadaj...",buttonDefaultText:"Vyber si z možností",dynamicButtonTextSuffix:"checked"},o.searchFilter=o.searchFilter||"",e.isDefined(o.settings.groupBy)&&o.$watch("options",function(n){e.isDefined(n)&&(o.orderedItems=t("orderBy")(n,o.settings.groupBy))}),e.extend(o.settings,o.extraSettings||[]),e.extend(o.externalEvents,o.events||[]),e.extend(o.texts,o.translationTexts),o.singleSelection=1===o.settings.selectionLimit,o.singleSelection&&e.isArray(o.selectedModel)&&0===o.selectedModel.length&&i(o.selectedModel),o.settings.closeOnBlur&&n.on("click",function(t){for(var n=t.target.parentElement,r=!1;e.isDefined(n)&&null!==n&&!r;)_.contains(n.className.split(" "),"multiselect-parent")&&!r&&n===a&&(r=!0),n=n.parentElement;r||o.$apply(function(){o.open=!1})}),o.getGroupTitle=function(e){return null!==o.settings.groupByTextProvider?o.settings.groupByTextProvider(e):e},o.getButtonText=function(){if(o.settings.dynamicTitle&&(o.selectedModel.length>0||e.isObject(o.selectedModel)&&_.keys(o.selectedModel).length>0)){if(o.settings.smartButtonMaxItems>0){var t=[];return e.forEach(o.options,function(e){if(o.isChecked(o.getPropertyForObject(e,o.settings.idProp))){var n=o.getPropertyForObject(e,o.settings.displayProp),r=o.settings.smartButtonTextConverter(n,e);t.push(r?r:n)}}),o.selectedModel.length>o.settings.smartButtonMaxItems&&(t=t.slice(0,o.settings.smartButtonMaxItems),t.push("...")),t.join(", ")}var n;return n=o.singleSelection?null!==o.selectedModel&&e.isDefined(o.selectedModel[o.settings.idProp])?1:0:e.isDefined(o.selectedModel)?o.selectedModel.length:0,0===n?o.texts.buttonDefaultText:n+" "+o.texts.dynamicButtonTextSuffix}return o.texts.buttonDefaultText},o.getPropertyForObject=function(t,n){return e.isDefined(t)&&t.hasOwnProperty(n)?t[n]:""},o.selectAll=function(){o.deselectAll(!1),o.externalEvents.onSelectAll(),e.forEach(o.options,function(e){o.setSelectedItem(e[o.settings.idProp],!0)})},o.deselectAll=function(e){e=e||!0,e&&o.externalEvents.onDeselectAll(),o.singleSelection?i(o.selectedModel):o.selectedModel.splice(0,o.selectedModel.length)},o.setSelectedItem=function(t,n){var r=l(t),s=null;if(s=""===o.settings.externalIdProp?_.find(o.options,r):r,o.singleSelection)return i(o.selectedModel),e.extend(o.selectedModel,s),void o.externalEvents.onItemSelect(s);n=n||!1;var a=-1!==_.findIndex(o.selectedModel,r);!n&&a?(o.selectedModel.splice(_.findIndex(o.selectedModel,r),1),o.externalEvents.onItemDeselect(r)):!a&&(0===o.settings.selectionLimit||o.selectedModel.length<o.settings.selectionLimit)&&(o.selectedModel.push(s),o.externalEvents.onItemSelect(s))},o.isChecked=function(t){return o.singleSelection?null!==o.selectedModel&&e.isDefined(o.selectedModel[o.settings.idProp])&&o.selectedModel[o.settings.idProp]===l(t)[o.settings.idProp]:-1!==_.findIndex(o.selectedModel,l(t))},o.externalEvents.onInitDone()}}}t.$inject=["$filter","$document","$compile","$parse"],e.module("common").directive("dropdownMultiselect",t)}(angular),function(e){"use strict";function t(){var e=function(e,t,n){e.$on("export-excel",function(e,n){t.tableExport({type:"excel",escape:!1})}),e.$on("export-doc",function(e,n){t.tableExport({type:"doc",escape:!1})})};return{restrict:"C",link:e}}e.module("common").directive("exportTable",t)}(angular),function(e){"use strict";function t(){return{templateUrl:"/app/common/templates/wait-cursor.template.html"}}e.module("common").directive("waitCursor",t)}(angular),function(e){"use strict";function t(){return function(e,t){return(1e6+e+"").slice(-t)}}e.module("common").filter("numberFixedLen",t)}(angular),function(e){"use strict";function t(t){function n(n,o){return o=o?-1:1,n.map(function(n){var r=1,s=e.identity,l=!1;if(e.isFunction(n))s=n;else if(e.isString(n)&&("@"==n.charAt(0)&&(l=!0,n=n.substring(1)),"+"!=n.charAt(0)&&"-"!=n.charAt(0)||(r="-"==n.charAt(0)?-1:1,n=n.substring(1)),""!==n&&(s=t(n),s.constant))){var i=s();s=function(e){return e[i]}}return{get:s,descending:r*o,localeAware:l}})}function o(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function r(e,t){return"function"==typeof e.valueOf&&(e=e.valueOf(),o(e))?e:i(e)&&(e=e.toString(),o(e))?e:t}function s(e,t){var n=typeof e;return null===e?(n="string",e="null"):"string"===n?e=e.toLowerCase():"object"===n&&(e=r(e,t)),{value:e,type:n}}function l(e,t){var n=0;return"string"===e.type?n=e.value.toString().localeCompare(t.value.toString(),"sk"):e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}function i(t){return e.isFunction(t.toString)&&t.toString!==Object.prototype.toString}return function(t,o,r){function i(e,t){return{value:e,predicateValues:c.map(function(n){return s(n.get(e),t)})};
}function a(e,t){for(var n=0,o=0,r=c.length;r>o&&!(n=l(e.predicateValues[o],t.predicateValues[o],c[o].localeAware)*c[o].descending);++o);return n}if(!t||!e.isArray(t))return t;e.isArray(o)||(o=[o]),0===o.length&&(o=["+"]);var c=n(o,r);c.push({get:function(){return{}},descending:r?-1:1});var u=Array.prototype.map.call(t,i);return u.sort(a),t=u.map(function(e){return e.value})}}t.$inject=["$parse"],e.module("common").filter("orderBySk",t)}(angular);