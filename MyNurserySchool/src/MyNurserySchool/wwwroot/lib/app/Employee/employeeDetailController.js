!function(){"use strict";function e(e,o,t,n,s,a){a("baseController",{$scope:e});var l=this;l.employeeId=n.id,l.employee={},l.newNote={},l.attendanceStates=["Žiadateľ","Pracujúci","Odstúpený"],l.isBusy=!0,o.get("/Api/Employee/"+l.employeeId).then(function(e){angular.copy(e.data,l.employee),l.employee.description=l.employee.description?s.trustAsHtml(l.employee.description.replace(/(\r\n|\n|\r)/gm,"<br />")):null;for(var o=0;o<l.employee.notes.length;o++)null!=l.employee.notes[o].text&&(l.employee.notes[o].text=s.trustAsHtml(l.employee.notes[o].text.replace(/(\r\n|\n|\r)/gm,"<br />")))},function(){toastr.error("Nepodarilo sa načítať informácie o zamestnancovi")})["finally"](function(){l.isBusy=!1}),l.deleteEmployee=function(){l.isBusy=!0,o["delete"]("/Api/Employee/"+l.employee.id).then(function(){toastr.success("Zamestnanec bol vymazaný"),t.path("#/")},function(e){toastr.error("Zamestnanca sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})},l.saveNote=function(){l.isBusy=!0,l.newNote.employeeId=l.employeeId,o.post("/Api/Note/",l.newNote).then(function(e){l.employee.notes.push(e.data),l.employee.notes[l.employee.notes.length-1].text=s.trustAsHtml(l.employee.notes[l.employee.notes.length-1].text.replace(/(\r\n|\n|\r)/gm,"<br />")),toastr.success("Poznámka bola zapísaná"),l.newNote={}},function(e){toastr.error("Poznámku sa nepodarilo zapísať")})["finally"](function(){l.isBusy=!1})},l.deleteNote=function(e){l.isBusy=!0,o["delete"]("/Api/Note/"+e).then(function(){for(var o=0;o<l.employee.notes.length;o++){var t=l.employee.notes[o];t.id==e&&l.employee.notes.splice(o,1)}toastr.success("Poznámka bola vymazaná")},function(e){toastr.error("Poznámku sa nepodarilo vymazať")})["finally"](function(){l.isBusy=!1})}}e.$inject=["$scope","$http","$location","$routeParams","$sce","$controller"],angular.module("nursery-app").controller("employeeDetailController",e)}();