@model MyNurserySchool.ViewModels.NurseryViewModel
@{
    ViewBag.Title = @Model.Name;
}
@section Scripts {
    <script src="~/lib/angular/angular.js"></script>
    <script src="~/lib/angular-route/angular-route.min.js"></script>
    <script src="~/lib/angular-animate/angular-animate.min.js"></script>
    <script src="~/lib/angular-ui/build/angular-ui.min.js"></script>
    <script src="~/lib/angular-strap/dist/angular-strap.min.js"></script>
    <script src="~/lib/angular-strap/dist/angular-strap.tpl.min.js"></script>
    <script src="~/lib/angular-i18n/angular-locale_sk-sk.js"></script>
    <script src="~/lib/angular-strap/src/helpers/dimensions.js"></script>
    <script src="~/lib/tableExport.jquery.plugin/tableExport.min.js"></script>
    <environment names="Development">
        <script src="~/app/Nursery/nursery-app.js"></script>
        <script src="~/app/Nursery/nurseryDetailController.js"></script>
        <script src="~/app/Nursery/nurseryEditController.js"></script>
        <script src="~/app/Class/classEditController.js"></script>
        <script src="~/app/Class/classDetailController.js"></script>
        <script src="~/app/Employee/employeeEditController.js"></script>
        <script src="~/app/Employee/employeeDetailController.js"></script>
        <script src="~/app/Child/childEditController.js"></script>
        <script src="~/app/Child/childDetailController.js"></script>
        <script src="~/app/Lists/employeesListController.js"></script>
        <script src="~/app/Lists/childrenListController.js"></script>
        <script src="~/app/Common/simpleControls.js"></script>
    </environment>
    <environment names="Production,Staging">
        <script src="~/lib/_app/Nursery/nursery-app.js"></script>
        <script src="~/lib/_app/Nursery/nurseryDetailController.js"></script>
        <script src="~/lib/_app/Nursery/nurseryEditController.js"></script>
        <script src="~/lib/_app/Class/classEditController.js"></script>
        <script src="~/lib/_app/Class/classDetailController.js"></script>
        <script src="~/lib/_app/Employee/employeeEditController.js"></script>
        <script src="~/lib/_app/Employee/employeeDetailController.js"></script>
        <script src="~/lib/_app/Child/childEditController.js"></script>
        <script src="~/lib/_app/Child/childDetailController.js"></script>
        <script src="~/lib/_app/Lists/employeesListController.js"></script>
        <script src="~/lib/_app/Lists/childrenListController.js"></script>
        <script src="~/lib/_app/Common/simpleControls.js"></script>
    </environment>
}
<div ng-app="nursery-app">
    <div ng-init="outerId = @Model.Id; canEdit = @(User.IsInRole("Editor") ? "true" : "false")">
        <div class="col-xs-12 col-sm-2 affix">
            <ul class="nav nav-pills nav-stacked nav-vertical">
                @if (User.IsInRole("Admin") || User.FindAll("Nursery").ToList().Count > 1)
                {
                    <li><a asp-controller="App" asp-action="Nurseries" class="list-group-item">Zoznam škôlok</a></li>
                }
                <li><a ng-href="#/" class="list-group-item"><i class="fa fa-home"></i>Prehľad</a>
                <li bs-collapse data-start-collapsed="true">
                    <a class="list-group-item" ng-click="collapsed = !collapsed" bs-collapse-toggle>
                        <span class="row">
                            <span class="col-xs-9">
                                <i class="fa fa-cubes"></i>
                                Triedy
                            </span>
                            <span class="col-xs-3 text-right">
                                <i class="fa fa-caret-down" ng-if="!collapsed"></i>
                                <i class="fa fa-caret-up" ng-if="collapsed"></i>
                            </span>
                        </span>
                    </a>
                    <ul class="collapse nav nav-pills nav-stacked nav-subnav am-collapse-add" bs-collapse-target>
                        @{
                            var classes = Model.Classes.OrderBy(cls => cls.Name);
                        
                            foreach (var cla in classes)
                            {
                                <li><a ng-href="#/class/@cla.Id">@cla.Name</a></li>
                            }
                        }
                        <li ng-if="canEdit"><a ng-href="#/class/0/edit"><i class="fa fa-plus-circle"></i>Pridať triedu</a></li>
                    </ul>
                </li>
                <li><a ng-href="#/children" class="list-group-item"><i class="fa fa-child"></i>Všetky deti</a></li>
                <li><a ng-href="#/children/waiting" class="list-group-item"><i class="fa fa-hourglass-half"></i>Žiadatelia</a></li>
                <li><a ng-href="#/children/archive" class="list-group-item"><i class="fa fa-archive"></i>Archív detí</a></li>
                <li><a ng-href="#/employees" class="list-group-item"><i class="fa fa-users"></i>Zamestnanci</a></li>
                <li><a ng-href="#/edit" class="list-group-item"><i class="fa fa-cogs"></i>{{ canEdit ? "Nastavenia škôlky" : "Informácie o škôlke"}}</a></li>
            </ul>
        </div>

        <div class="col-sm-offset-2 col-sm-10">
            <div class="container-fluid">
                
                <div class="view" ng-view></div>

            </div>
        </div>
    </div>
</div>
